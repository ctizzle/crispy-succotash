(this["webpackJsonpcrispy-succotash"]=this["webpackJsonpcrispy-succotash"]||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n(1),a=n(19),s=n.n(a),i=n(2),o=n.n(i),u=n(6),l="token",j=function(){return localStorage.getItem(l)},h={makeApiRequest:function(){var e=Object(u.a)(o.a.mark((function e(t,n,c){var r,a,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(),a={"Content-Type":"application/json"},r&&(a.authorization="Bearer ".concat(r)),s={method:n,headers:a},c&&(s.body=JSON.stringify(c)),e.next=7,fetch("https://fitnesstrac-kr.herokuapp.com/api/"+t,s);case 7:return i=e.sent,e.next=10,i.json();case 10:return u=e.sent,e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()},p=(n(16),n(28),n(0)),b=function(){var e=Object(r.useState)(""),t=Object(c.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),i=Object(c.a)(s,2),l=i[0],j=i[1],h=Object(r.useState)([]),b=Object(c.a)(h,2),d=b[0],O=b[1],f=Object(r.useState)(!1),x=Object(c.a)(f,2),m=x[0],v=x[1],g=function(e,t){var n=localStorage.getItem("token");console.log(n),fetch("https://fitnesstrac-kr.herokuapp.com/api/routines",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({name:e,goal:t,isPublic:!0})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(){console.error,alert("This routine name is already in use! Try a differnt name")}))},k=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var c,r,a,s,i,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=localStorage.getItem("token"),e.prev=1,e.next=4,fetch("https://fitnesstrac-kr.herokuapp.com/api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,s=a.username,i="http://fitnesstrac-kr.herokuapp.com/api/users/".concat(s,"/routines"),e.next=12,fetch(i,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 12:return u=e.sent,e.next=15,u.json();case 15:l=e.sent,O(l),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error;case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)(k,[]);var y=function(){var e=Object(u.a)(o.a.mark((function e(t,n,c){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.prev=1,a="http://fitnesstrac-kr.herokuapp.com/api/routines/".concat(c),e.next=5,fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({name:t,goal:n})});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error;case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n,c){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("token"),console.log(n),e.prev=2,c="http://fitnesstrac-kr.herokuapp.com/api/routines/".concat(t),e.next=6,fetch(c,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 6:return r=e.sent,e.next=9,r.json();case 9:(a=e.sent).success&&alert('"'.concat(a.name,'" has been successfully deleted"')),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error;case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n,l),e.next=4,g(n,l);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to update this routine?")){e.next=5;break}return t.preventDefault(),e.next=4,y(n,l,t.currentTarget.value);case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!confirm("Are you sure you want to delete this routine?")){e.next=5;break}return t.preventDefault(),e.next=4,S(t.currentTarget.value);case 4:window.location.reload();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){v(!m)},A=d.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:["Name: ",e.name," "]}),Object(p.jsxs)("p",{children:["Goal: ",e.goal," "]}),Object(p.jsx)("button",{value:e.id,onClick:N,children:"Edit Routine"}),m&&Object(p.jsx)("div",{children:Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Name: "}),Object(p.jsx)("input",{type:"text",name:"routinename",value:n,onChange:function(e){return a(e.currentTarget.value)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Goal: "}),Object(p.jsx)("input",{type:"text",name:"goal",value:l,onChange:function(e){return j(e.currentTarget.value)}})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{value:e.id,onClick:T,children:"Update"}),Object(p.jsx)("button",{onClick:N,children:"Cancel"})]})]})}),Object(p.jsx)("button",{value:e.id,onClick:C,children:"Delete Routine"})]},"act-id-".concat(t))}));return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"RoutineBox",children:[Object(p.jsx)("h2",{children:"Add New Routine"}),Object(p.jsxs)("form",{onSubmit:w,children:[Object(p.jsxs)("ul",{children:[Object(p.jsxs)("li",{children:["Name: ",Object(p.jsx)("input",{type:"text",name:"name",id:"name",value:n,onChange:function(e){return a(e.currentTarget.value)}})]}),Object(p.jsxs)("li",{children:["Goal: ",Object(p.jsx)("input",{type:"text",name:"goal",id:"goal",value:l,onChange:function(e){return j(e.currentTarget.value)}})]})]}),Object(p.jsx)("button",{children:"Add New Routine"})]})]}),Object(p.jsx)("h1",{children:" My Routines "}),A]})},d=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.makeApiRequest("/routines","GET");case 3:t=e.sent,a(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n]);var s=n.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:" ROUTINES "}),Object(p.jsxs)("p",{children:["Name: ",e.name]}),Object(p.jsxs)("p",{children:["Goal: ",e.goal]}),Object(p.jsxs)("p",{children:["Creator: ",e.creatorName]}),e.activities.map((function(e){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["Activity Name: ",e.name]}),Object(p.jsxs)("ul",{children:["Activity Description: ",e.description]}),Object(p.jsxs)("ul",{children:["Activity Duration: ",e.duration]}),Object(p.jsxs)("ul",{children:["Activity Count: ",e.count]})]})}))]},"rou-id-".concat(t))}));return Object(p.jsxs)("div",{className:"main-box",children:[s,Object(p.jsx)("h1",{children:"We are in the Routines page!"})]})},O=n(22),f=(n(17),function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)({name:"",description:""}),i=Object(c.a)(s,2),l=i[0],j=i[1],b=Object(r.useState)(""),d=Object(c.a)(b,2),f=(d[0],d[1]),x=Object(r.useState)(""),m=Object(c.a)(x,2),v=(m[0],m[1]);Object(r.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.makeApiRequest("activities?limit=10","GET");case 3:t=e.sent,console.log(t),a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[n]);var g=n.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:" ACTIVITIES "}),Object(p.jsxs)("h2",{children:[" Name :",e.name," "]}),Object(p.jsxs)("p",{children:["description:",e.description," "]})]},"act-id-".concat(t))}));function k(e,t){"name"===t?f(e.target.value):"description"===t&&v(e.target.value);var n=Object(O.a)({},l),c=e.target.value;n[t]=c,j(n),console.log(l)}function y(){return(y=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,h.makeApiRequest("/activities","POST",l);case 3:history.push;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(g),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"activity-form",children:Object(p.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Activity Name:"}),Object(p.jsx)("input",{onChange:function(e){return k(e,"name")},value:l.name,type:"text"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Activity Description:"}),Object(p.jsx)("input",{onChange:function(e){return k(e,"description")},value:l.description,type:"text"})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{children:"Submit"})})]})}),Object(p.jsxs)("div",{className:"main-box",children:[g,Object(p.jsx)("h1",{children:"We are in the Activities page!"})]})]})}),x=function(){return Object(p.jsx)("div",{className:"home-page",children:Object(p.jsx)("h1",{children:"Welcome to fitness track.r!"})})},m=n(3),v=n(7),g=(n(30),function(e){var t=e.isLoggedIn,n=e.setToken,c=Object(m.f)();return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("header",{children:Object(p.jsx)("h1",{children:"Fitness track.r"})}),t?Object(p.jsx)("nav",{className:"navigation",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)(v.b,{to:"/MyRoutines",children:" My Routines "}),Object(p.jsx)(v.b,{to:"/Routines",children:" Routines "}),Object(p.jsx)(v.b,{to:"/",children:" Home "}),Object(p.jsx)(v.b,{to:"/Activities",children:" Activities "}),Object(p.jsx)("button",{className:"logout",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),n(null),c.push("/Home")},children:"Logout"})]})}):Object(p.jsx)("nav",{className:"navigation",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)(v.b,{to:"/Routines",children:" Routines "}),Object(p.jsx)(v.b,{to:"/",children:" Home "}),Object(p.jsx)(v.b,{to:"/Activities",children:" Activities "}),Object(p.jsx)(v.b,{to:"/Login",children:" Login "}),Object(p.jsx)(v.b,{to:"/Register",children:" Register "})]})})]})}),k=function(e){var t=e.setToken,n=Object(m.f)(),a=Object(r.useState)(""),s=Object(c.a)(a,2),i=s[0],l=s[1],j=Object(r.useState)(""),h=Object(c.a)(j,2),b=h[0],d=h[1];function O(e,c){fetch("https://fitnesstrac-kr.herokuapp.com/api/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:c})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),console.log(e.message),alert(e.message),t(e.token)})).catch((function(e){console.error,alert(e.message)})).finally((function(){n.push("/")}))}var f=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(i,b),e.next=4,O(i,b);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"activity-form",children:[Object(p.jsx)("h1",{children:"Welcome back! Please login!"}),Object(p.jsxs)("form",{onSubmit:f,children:[Object(p.jsx)("input",{type:"text",required:!0,name:"username",value:i,onChange:function(e){return l(e.currentTarget.value)},placeholder:"username"}),Object(p.jsx)("input",{type:"password",required:!0,name:"password",value:b,onChange:function(e){return d(e.currentTarget.value)},placeholder:"password"}),Object(p.jsx)("button",{children:"Submit"})]})]})},y=function(e){var t=e.setToken,n=Object(r.useState)(""),a=Object(c.a)(n,2),s=a[0],i=a[1],l=Object(r.useState)(""),j=Object(c.a)(l,2),h=j[0],b=j[1];function d(e,n){fetch("https://fitnesstrac-kr.herokuapp.com/api/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})}).then((function(e){return e.json()})).then((function(e){console.log(e.message),console.log(e.token),localStorage.setItem("token",e.token),t(e.token)})).catch((function(e){console.error,alert(e.message)}))}var O=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(s,h),e.next=4,d(s,h);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"activity-form",children:[Object(p.jsx)("h1",{children:"First time user? Sign up!"}),Object(p.jsxs)("form",{onSubmit:O,children:[Object(p.jsx)("input",{type:"text",required:!0,name:"username",value:s,onChange:function(e){return i(e.currentTarget.value)},placeholder:"username"}),Object(p.jsx)("input",{type:"password",required:!0,name:"password",value:h,onChange:function(e){return b(e.currentTarget.value)},placeholder:"password"}),Object(p.jsx)("button",{children:"Submit"})]})]})},S=function(){var e=Object(r.useState)(localStorage.getItem("token")),t=Object(c.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!!n),i=Object(c.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){u(!!n)}),[n]),Object(p.jsx)("div",{className:"head",children:Object(p.jsx)("div",{children:Object(p.jsxs)(v.a,{children:[Object(p.jsx)(g,{isLoggedIn:o,setToken:a}),Object(p.jsx)("div",{id:"app"}),Object(p.jsx)("main",{children:Object(p.jsxs)(m.c,{children:[Object(p.jsx)(m.a,{path:"/Login",children:Object(p.jsx)(k,{setToken:a})}),Object(p.jsx)(m.a,{path:"/Register",children:Object(p.jsx)(y,{setToken:a})}),Object(p.jsx)(m.a,{exact:!0,path:"/",children:Object(p.jsx)(x,{})}),Object(p.jsx)(m.a,{path:"/routines",children:Object(p.jsx)(d,{})}),Object(p.jsx)(m.a,{path:"/activities",children:Object(p.jsx)(f,{})}),Object(p.jsx)(m.a,{path:"/MyRoutines",children:Object(p.jsx)(b,{})})]})})]})})})};s.a.render(Object(p.jsx)(v.a,{children:Object(p.jsx)(S,{})}),document.getElementById("app"));t.default=S}},[[36,1,2]]]);
//# sourceMappingURL=main.b20b9d76.chunk.js.map